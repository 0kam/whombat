(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[613],{69686:function(e,t,s){Promise.resolve().then(s.bind(s,74840))},74840:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return R}});var n=s(14357),i=s(6439),r=s(40072),a=s(29122),l=s(56793),o=s(24070),u=s(45003),c=s(80679);function d(e){let{evaluationSet:t}=e,s=(0,i.useMemo)(()=>({evaluation_set__eq:t.id}),[t.id]),{total:d,query:{isLoading:h}}=(0,c.Z)({filter:s,pageSize:0});return(0,n.jsxs)(r.Z,{children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,n.jsx)(o.H3,{children:"Overview"}),(0,n.jsxs)(u.Z,{mode:"text",variant:"primary",href:"/evaluation/detail/settings?evaluation_set_id=".concat(t.id),children:[(0,n.jsx)(l.dt,{className:"h-5 w-5 inline-block mr-2"})," Add Evaluation Tasks"]})]}),(0,n.jsxs)("div",{className:"flex flex-row gap-2 justify-around",children:[(0,n.jsx)(a.Z,{icon:(0,n.jsx)(l.Fl,{className:"h-8 w-8 inline-block text-blue-500"}),title:"Num Examples",value:d,isLoading:h}),(0,n.jsx)(a.Z,{icon:(0,n.jsx)(l.Dg,{className:"h-8 w-8 inline-block text-blue-500"}),title:"Num Classes",value:t.tags.length}),(0,n.jsx)(a.Z,{icon:(0,n.jsx)(l.ew,{className:"h-8 w-8 inline-block text-blue-500"}),title:"Evaluation Mode",value:t.mode})]})]})}var h=s(91293),m=s(8554),f=s(81361),x=s(11441),v=s(54313);let p={};function j(){let{filter:e=p,pageSize:t=10}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,v.Z)({fixed:e}),{query:n,pagination:i,items:r,total:a}=(0,x.Z)({name:"prediction_runs",func:f.Z.prediction_runs.getMany,pageSize:t,filter:s.filter});return{filter:s,query:n,pagination:i,items:r,total:a}}function g(e){let{evaluationSet:t,showMax:s=5}=e,r=(0,i.useMemo)(()=>({evaluation_set__eq:t.id,is_model__eq:!0}),[t.id]),a=j({filter:r,pageSize:s});return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,n.jsxs)(o.H4,{children:[(0,n.jsx)(l.ZA,{className:"h-5 w-5 inline-block mr-2"}),"Model Evaluations"]}),(0,n.jsxs)(u.Z,{href:"/evaluation/detail/model_runs/create/?evaluation_set_id=".concat(t.id),mode:"text",variant:"primary",children:[(0,n.jsx)(l.dt,{className:"h-5 w-5 inline-block mr-2"})," Add Model Runs"]})]}),a.query.isLoading?(0,n.jsx)(h.Z,{}):a.items.length>0?(0,n.jsx)("div",{className:"flex flex-col gap-2",children:a.items.map(e=>(0,n.jsxs)("div",{children:[e.model_name," - ",e.model_version]},e.id))}):(0,n.jsx)(m.Z,{children:"No model evaluations found"})]})}function b(e){let{evaluationSet:t,showMax:s=5}=e,r=(0,i.useMemo)(()=>({evaluation_set__eq:t.id,is_model__eq:!1}),[t.id]),a=j({filter:r,pageSize:s});return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,n.jsxs)(o.H4,{className:"whitespace-nowrap",children:[(0,n.jsx)(l.tB,{className:"h-5 w-5 inline-block mr-2"}),"User Training Sessions"]}),(0,n.jsxs)(u.Z,{href:"/evaluation/detail/train/new/?evaluation_set_id=".concat(t.id),mode:"text",variant:"primary",children:[(0,n.jsx)(l.RJ,{className:"h-5 w-5 inline-block mr-2"})," Start New"]})]}),a.query.isLoading?(0,n.jsx)(h.Z,{}):a.items.length>0?(0,n.jsx)("div",{className:"flex flex-col gap-2",children:a.items.map(e=>(0,n.jsxs)("div",{children:[e.model_name," - ",e.model_version]},e.id))}):(0,n.jsx)(m.Z,{children:"No training sessions"})]})}var w=s(60169),y=s(91226);function C(e){let{onDelete:t,onDownload:s}=e;return(0,n.jsxs)("div",{className:"flex flex-row gap-2 justify-center",children:[(0,n.jsxs)(w.Z,{mode:"text",variant:"primary",onClick:s,children:[(0,n.jsx)(l._8,{className:"h-5 w-5 inline-block mr-2"})," Download"]}),(0,n.jsx)(N,{onDelete:t})]})}function N(e){let{onDelete:t}=e;return(0,n.jsx)(y.Z,{title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.aN,{className:"inline-block w-8 h-8 mr-2 text-red-500"}),"Are you sure you want to delete this evaluation set?"]}),button:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.pJ,{className:"inline-block w-5 h-5 mr-2"}),"Delete Set"]}),mode:"text",variant:"danger",children:e=>{let{close:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("p",{children:"This action cannot be undone. All evaluations stored in this set will be deleted."}),(0,n.jsx)("p",{children:"Do you want to proceed?"})]}),(0,n.jsxs)("div",{className:"flex flex-row justify-end gap-2 mt-4",children:[(0,n.jsxs)(w.Z,{mode:"outline",variant:"primary",onClick:s,children:[(0,n.jsx)(l.Tw,{className:"h-5 w-5 inline-block mr-2"}),"Cancel"]}),(0,n.jsxs)(w.Z,{mode:"text",variant:"danger",onClick:t,children:[(0,n.jsx)(l.pJ,{className:"h-5 w-5 inline-block mr-2"}),"Delete"]})]})]})}})}var k=s(38338),M=s(35573);function Z(e){let{evaluationSet:t,onChange:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"px-4 sm:px-0",children:(0,n.jsx)(o.H3,{className:"text-center",children:"Details"})}),(0,n.jsx)("div",{className:"mt-4 border-t border-stone-300 dark:border-stone-700",children:(0,n.jsxs)("dl",{className:"divide-y divide-stone-500",children:[(0,n.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,n.jsx)(k.iV,{children:"Name"}),(0,n.jsx)(k.ue,{value:t.name,onChange:e=>null==s?void 0:s({name:e}),Input:M.II,autoFocus:!0,children:t.name})]}),(0,n.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,n.jsx)(k.iV,{children:"Description"}),(0,n.jsx)(k.ue,{value:t.description,onChange:e=>null==s?void 0:s({description:e}),rows:6,Input:M.Kx,autoFocus:!0,children:t.description})]}),(0,n.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,n.jsx)(k.iV,{children:"Evaluation Mode"}),(0,n.jsx)(k.pj,{children:t.mode})]}),(0,n.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,n.jsx)(k.iV,{children:"Created On"}),(0,n.jsx)(k.pj,{children:t.created_at.toLocaleString()})]})]})})]})}function _(e){let{evaluationSet:t,onChange:s,onDelete:i}=e;return(0,n.jsxs)("div",{className:"w-100 flex flex-row gap-8 justify-between",children:[(0,n.jsxs)("div",{className:"grow flex flex-col gap-4",children:[(0,n.jsx)(d,{evaluationSet:t}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(r.Z,{children:(0,n.jsx)(g,{evaluationSet:t})}),(0,n.jsx)(r.Z,{children:(0,n.jsx)(b,{evaluationSet:t})})]})]}),(0,n.jsxs)("div",{className:"flex flex-col flex-none max-w-sm gap-4",children:[(0,n.jsx)(C,{onDelete:i}),(0,n.jsx)("div",{className:"sticky top-8",children:(0,n.jsx)(r.Z,{children:(0,n.jsx)(Z,{evaluationSet:t,onChange:s})})})]})]})}var S=s(95754);function R(){let{evaluationSet:e,delete:t,update:s}=(0,i.useContext)(S.M8);return(0,n.jsx)(_,{evaluationSet:e,onChange:s,onDelete:t})}},95754:function(e,t,s){"use strict";s.d(t,{GT:function(){return a},M8:function(){return u},Sr:function(){return l},St:function(){return r},vZ:function(){return o}});var n=s(6439),i=s(1799);let r=(0,n.createContext)({user:{id:"null",username:"anonymous",email:"",name:"anonymous",is_active:!1,is_superuser:!1}}),a=(0,n.createContext)({recording_id:-1}),l=(0,n.createContext)({id:-1,name:"",description:"",tags:[],created_at:new Date,uuid:""}),o=(0,n.createContext)({dataset:null,isLoading:!0}),u=(0,n.createContext)({evaluationSet:{id:-1,name:"",description:"",tags:[],uuid:"",mode:i.kU.CLIP_CLASSIFICATION,created_at:new Date}})},91293:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(14357),i=s(36973);function r(){return(0,n.jsx)("div",{className:"w-full h-full flex flex-row justify-center items-center",children:(0,n.jsx)(i.Z,{})})}},91226:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var n=s(14357),i=s(6439),r=s(60169),a=s(88821),l=s(80972);function o(e){let{title:t,children:s,onClose:r,isOpen:o=!0}=e;return(0,n.jsx)(l.u,{appear:!0,show:o,as:i.Fragment,children:(0,n.jsxs)(a.V,{as:"div",className:"relative z-10",onClose:()=>null==r?void 0:r(),children:[(0,n.jsx)(l.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,n.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,n.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,n.jsx)(l.u.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,n.jsxs)(a.V.Panel,{className:"w-full max-w-fit transform overflow-hidden rounded-2xl bg-stone-50 dark:bg-stone-700 text-stone-700 dark:text-stone-300 p-6 text-left align-middle shadow-xl transition-all z-[99999]",children:[null!=t&&(0,n.jsx)(a.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-stone-900 dark:text-stone-100 mb-6",children:t}),(0,n.jsx)("div",{className:"mt-2",children:s({close:()=>null==r?void 0:r()})})]})})})})]})})}function u(e){let{children:t,title:s,button:a="Open",...l}=e,[u,c]=(0,i.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Z,{type:"button",onClick:()=>c(!0),...l,children:a}),(0,n.jsx)(o,{title:(0,n.jsx)("div",{className:"max-w-md",children:s}),isOpen:u,onClose:()=>c(!1),children:e=>{let{close:s}=e;return(0,n.jsx)("div",{className:"max-w-md",children:t({close:s})})}})]})}},40072:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(14357),i=s(5374),r=s.n(i);function a(e){let{children:t,className:s,...i}=e;return(0,n.jsx)("div",{className:r()("border shadow flex flex-col gap-3 p-4 rounded-md border-stone-300 dark:border-stone-700 text-stone-700 dark:text-stone-300",s),...i,children:t})}},38338:function(e,t,s){"use strict";s.d(t,{iV:function(){return u},pj:function(){return o},ue:function(){return c}});var n=s(14357),i=s(6439),r=s(5374),a=s.n(r),l=s(56793);function o(e){let{children:t,className:s,...i}=e;return(0,n.jsx)("dd",{className:a()("mt-1 text-sm leading-6 text-stone-700 dark:text-stone-400 sm:col-span-2 sm:mt-0",s),...i,children:t})}function u(e){let{children:t,className:s,...i}=e;return(0,n.jsx)("dt",{className:a()("text-sm font-medium leading-6 text-stone-900 dark:text-stone-300",s),...i,children:t})}function c(e){let{children:t,Input:s,value:r,onChange:a,...u}=e,[c,d]=(0,i.useState)(!1),[h,m]=(0,i.useState)(r);return c?(0,n.jsx)(o,{children:(0,n.jsx)(s,{value:h,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(a(h),d(!1)),"Escape"===e.key&&(m(r),d(!1))},onBlur:()=>{m(r),d(!1)},onChange:e=>m(e.target.value),...u})}):(0,n.jsxs)(o,{className:"flex flex-row justify-between",children:[t,(0,n.jsx)("button",{onClick:()=>d(!0),className:"text-sm text-stone-500 underline ml-2",children:(0,n.jsx)(l.dY,{className:"w-5 h-5 inline-block text-blue-500"})})]})}},8554:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(14357);function i(e){let{children:t}=e;return(0,n.jsx)("div",{className:"p-8 w-full",children:(0,n.jsx)("div",{className:"w-full border border-dashed rounded-md border-stone-500 p-4 flex flex-col items-center justify-center text-stone-500 text-center",children:t})})}},24070:function(e,t,s){"use strict";s.d(t,{H1:function(){return a},H3:function(){return l},H4:function(){return o}});var n=s(14357),i=s(5374),r=s.n(i);function a(e){let{children:t,className:s,...i}=e;return(0,n.jsx)("h1",{className:r()("text-2xl font-bold text-stone-900 dark:text-stone-200",s),...i,children:t})}function l(e){let{children:t,className:s,...i}=e;return(0,n.jsx)("h3",{className:r()("text-lg font-semibold leading-7 items-center text-stone-900 dark:text-stone-200",s),...i,children:t})}function o(e){let{children:t,className:s,...i}=e;return(0,n.jsx)("h4",{className:r()("text-md font-semibold leading-6 text-stone-900 dark:text-stone-200",s),...i,children:t})}},45003:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var n=s(14357),i=s(5374),r=s.n(i),a=s(90111),l=s.n(a),o=s(60169);function u(e){let{children:t,variant:s="primary",mode:i="filled",padding:a="p-2.5",className:u,...c}=e,d=(0,o.y)({variant:s,mode:i,padding:a});return(0,n.jsx)(l(),{...c,className:r()(d,u),children:t})}},29122:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(14357),i=s(36973);function r(e){let{icon:t,title:s,value:r,isLoading:a=!1,onClick:l}=e;return(0,n.jsxs)("div",{className:"flex flex-row gap-2 items-start",children:[(0,n.jsx)("button",{className:"flex-none cursor-pointer",onClick:l,children:t}),(0,n.jsxs)("div",{className:"flex-grow-0",children:[(0,n.jsx)("div",{className:"inline-flex items-baseline gap-2",children:a?(0,n.jsx)(i.Z,{className:"h-5 w-5",variant:"info"}):(0,n.jsx)("span",{className:"text-xl font-bold",children:r.toLocaleString()})}),(0,n.jsx)("div",{className:"text-sm font-thin",children:s})]})]})}},36973:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(14357),i=s(5374),r=s.n(i);function a(e){let{variant:t="primary",className:s="w-8 h-8"}=e;return(0,n.jsxs)("div",{role:"status",children:[(0,n.jsxs)("svg",{"aria-hidden":"true",className:r()(s,"mr-2 inline animate-spin text-stone-200 dark:text-stone-600",function(e){switch(e){case"primary":case"success":return"fill-emerald-500";case"secondary":return"fill-stone-900 dark:fill-stone-100";case"danger":return"fill-rose-500";case"warning":return"fill-yellow-500";case"info":return"fill-blue-500"}}(t)),viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),(0,n.jsx)("span",{className:"sr-only",children:"Loading..."})]})}},80679:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var n=s(62976),i=s(81361),r=s(11441),a=s(54313);let l={};function o(){let{filter:e=l,pageSize:t=10,enabled:s=!0,onCreate:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=(0,a.Z)({fixed:e}),{query:c,pagination:d,items:h,total:m}=(0,r.Z)({name:"evaluation_tasks",func:i.Z.evaluation_tasks.getMany,pageSize:t,filter:u.filter,enabled:s}),f=(0,n.D)({mutationFn:i.Z.evaluation_tasks.createMany,onSuccess:e=>{c.refetch(),null==o||o(e)}});return{filter:u,query:c,pagination:d,items:h,total:m,create:f}}},54313:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(6439),i=s(30485);function r(e){let{fixed:t,debounce:s=500}=e,[r,a]=(0,n.useState)(t),[l,o]=(0,n.useState)(t);(0,n.useEffect)(()=>{a(t),o(t)},[t]);let u=(0,n.useCallback)(e=>void 0!==t[e],[t]);(0,i.Z)(()=>{o(r)},s,[r]);let c=(0,n.useMemo)(()=>Object.keys(r).filter(e=>!u(e)).length,[r,u]);return{filter:l,set:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(!u(e)||s)&&a(s=>({...s,[e]:t}))},get:e=>r[e],clear:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(!u(e)||t)&&a(t=>{let s={...t};return delete s[e],o(s),s})},reset:()=>a(t),submit:()=>{o(r)},size:c,isFixed:u}}},11441:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(6439),i=s(72007);function r(e){var t,s;let{name:r,func:a,pageSize:l,filter:o,enabled:u=!0}=e,[c,d]=(0,n.useState)(0),[h,m]=(0,n.useState)(l),f=[r,c,h,o],x=(0,i.a)(f,()=>a({limit:h,offset:c*h,...o}),{keepPreviousData:!0,enabled:u,refetchOnWindowFocus:!1}),v=Math.ceil((null!==(s=null===(t=x.data)||void 0===t?void 0:t.total)&&void 0!==s?s:0)/h);(0,n.useEffect)(()=>{d(e=>e>=v&&v>0?v-1:e)},[v]);let{items:p,total:j}=(0,n.useMemo)(()=>null==x.data||x.isLoading?{items:[],total:0}:{items:x.data.items,total:x.data.total},[x.data,x.isLoading]);return{items:p,total:j,pagination:{page:c,numPages:v,pageSize:h,setPage:e=>{e>=0&&e<v&&d(e)},setPageSize:e=>{e>0&&m(t=>{var s,n,i,r;let a=Math.ceil((null!==(i=null===(s=x.data)||void 0===s?void 0:s.total)&&void 0!==i?i:0)/e),l=Math.min(c*t,null!==(r=null===(n=x.data)||void 0===n?void 0:n.total)&&void 0!==r?r:0);return d(Math.max(0,Math.min(Math.floor(l/e),a-1))),e})},nextPage:()=>{c<v-1&&d(c+1)},prevPage:()=>{c>0&&d(c-1)},hasNextPage:c<v-1,hasPrevPage:c>0},query:x,queryKey:f}}},30485:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(6439),i=s(7460);function r(e,t,s){void 0===t&&(t=0),void 0===s&&(s=[]);var r=(0,i.Z)(e,t),a=r[0],l=r[1],o=r[2];return(0,n.useEffect)(o,s),[a,l]}},7460:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(6439);function i(e,t){void 0===t&&(t=0);var s=(0,n.useRef)(!1),i=(0,n.useRef)(),r=(0,n.useRef)(e),a=(0,n.useCallback)(function(){return s.current},[]),l=(0,n.useCallback)(function(){s.current=!1,i.current&&clearTimeout(i.current),i.current=setTimeout(function(){s.current=!0,r.current()},t)},[t]),o=(0,n.useCallback)(function(){s.current=null,i.current&&clearTimeout(i.current)},[]);return(0,n.useEffect)(function(){r.current=e},[e]),(0,n.useEffect)(function(){return l(),o},[t]),[a,o,l]}},57047:function(e,t,s){"use strict";s.d(t,{q:function(){return r}});var n=s(6439),i=s(68344);function r(e,t){let s=(0,n.useRef)([]),r=(0,i.z)(e);(0,n.useEffect)(()=>{let e=[...s.current];for(let[n,i]of t.entries())if(s.current[n]!==i){let n=r(t,e);return s.current=t,n}},[r,...t])}},84834:function(e,t,s){"use strict";function n(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function i(){return n()||/Android/gi.test(window.navigator.userAgent)}s.d(t,{gn:function(){return n},tq:function(){return i}})},45433:function(e,t,s){"use strict";s.d(t,{_:function(){return n}});let n=console},39451:function(e,t,s){"use strict";s.d(t,{R:function(){return o},m:function(){return l}});var n=s(45433),i=s(41537),r=s(82263),a=s(77827);class l extends r.F{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||n._,this.observers=[],this.state=e.state||o(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(t=>t!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,t;return null!=(e=null==(t=this.retryer)?void 0:t.continue())?e:this.execute()}async execute(){var e,t,s,n,i,r,l,o,u,c,d,h,m,f,x,v,p,j,g,b;let w="loading"===this.state.status;try{if(!w){this.dispatch({type:"loading",variables:this.options.variables}),await (null==(u=(c=this.mutationCache.config).onMutate)?void 0:u.call(c,this.state.variables,this));let e=await (null==(d=(h=this.options).onMutate)?void 0:d.call(h,this.state.variables));e!==this.state.context&&this.dispatch({type:"loading",context:e,variables:this.state.variables})}let m=await (()=>{var e;return this.retryer=(0,a.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise})();return await (null==(e=(t=this.mutationCache.config).onSuccess)?void 0:e.call(t,m,this.state.variables,this.state.context,this)),await (null==(s=(n=this.options).onSuccess)?void 0:s.call(n,m,this.state.variables,this.state.context)),await (null==(i=(r=this.mutationCache.config).onSettled)?void 0:i.call(r,m,null,this.state.variables,this.state.context,this)),await (null==(l=(o=this.options).onSettled)?void 0:l.call(o,m,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:m}),m}catch(e){try{throw await (null==(m=(f=this.mutationCache.config).onError)?void 0:m.call(f,e,this.state.variables,this.state.context,this)),await (null==(x=(v=this.options).onError)?void 0:x.call(v,e,this.state.variables,this.state.context)),await (null==(p=(j=this.mutationCache.config).onSettled)?void 0:p.call(j,void 0,e,this.state.variables,this.state.context,this)),await (null==(g=(b=this.options).onSettled)?void 0:g.call(b,void 0,e,this.state.variables,this.state.context)),e}finally{this.dispatch({type:"error",error:e})}}}dispatch(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"loading":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!(0,a.Kw)(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...t,...e.state}}})(this.state),i.V.batch(()=>{this.observers.forEach(t=>{t.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}},82263:function(e,t,s){"use strict";s.d(t,{F:function(){return i}});var n=s(23288);class i{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,n.PN)(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,null!=e?e:n.sk?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}},62976:function(e,t,s){"use strict";s.d(t,{D:function(){return h}});var n=s(6439),i=s(23288),r=s(39451),a=s(41537),l=s(85206);class o extends l.l{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;let s=this.options;this.options=this.client.defaultMutationOptions(e),(0,i.VS)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;null==(e=this.currentMutation)||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();let t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let e=this.currentMutation?this.currentMutation.state:(0,r.R)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){a.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var t,s,n,i,r,a,l,o;e.onSuccess?(null==(t=(s=this.mutateOptions).onSuccess)||t.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(n=(i=this.mutateOptions).onSettled)||n.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):e.onError&&(null==(r=(a=this.mutateOptions).onError)||r.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(l=(o=this.mutateOptions).onSettled)||l.call(o,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)})})}}var u=s(38440),c=s(30646),d=s(51549);function h(e,t,s){let r=(0,i.lV)(e,t,s),l=(0,c.NL)({context:r.context}),[h]=n.useState(()=>new o(l,r));n.useEffect(()=>{h.setOptions(r)},[h,r]);let f=(0,u.$)(n.useCallback(e=>h.subscribe(a.V.batchCalls(e)),[h]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),x=n.useCallback((e,t)=>{h.mutate(e,t).catch(m)},[h]);if(f.error&&(0,d.L)(h.options.useErrorBoundary,[f.error]))throw f.error;return{...f,mutate:x,mutateAsync:f.mutate}}function m(){}}},function(e){e.O(0,[6949,3372,4564,243,2007,1651,111,8821,1361,9803,8702,7431,1744],function(){return e(e.s=69686)}),_N_E=e.O()}]);