# Whombat ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€Whombatã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ€é€Ÿã§èµ·å‹•ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“¦ èµ·å‹•æ–¹æ³•ã®é¸æŠ

Whombatã«ã¯2ã¤ã®èµ·å‹•æ–¹æ³•ãŒã‚ã‚Šã¾ã™ï¼š

- **ğŸ³ Dockerç‰ˆï¼ˆæ¨å¥¨ï¼‰**: æœ€ã‚‚ç°¡å˜ã§ä¿¡é ¼æ€§ãŒé«˜ã„
- **ğŸ’» é–‹ç™ºç‰ˆï¼ˆuv + npmï¼‰**: é–‹ç™ºã‚„ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå‘ã‘

---

## ğŸ³ Dockerç‰ˆã§èµ·å‹•ï¼ˆæ¨å¥¨ï¼‰

### Step 1: ç’°å¢ƒè¨­å®š

```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
cp .env.example .env

# .envã‚’ç·¨é›†ã—ã¦ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¨­å®š
# WHOMBAT_AUDIO_DIR=/path/to/your/audio/files
nano .env
```

### Step 2: èµ·å‹•

```bash
./scripts/docker.sh start
```

### Step 3: ã‚¢ã‚¯ã‚»ã‚¹

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5000 ã‚’é–‹ã

**è©³ç´°**: [DOCKER.md](DOCKER.md) ã‚’å‚ç…§

---

## ğŸ’» é–‹ç™ºç‰ˆã§èµ·å‹•ï¼ˆuv + npmï¼‰

### Step 1: ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆåˆå›ã®ã¿ï¼‰

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ä¾å­˜é–¢ä¿‚
cd back
uv sync

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ä¾å­˜é–¢ä¿‚
cd ../front
npm install

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«æˆ»ã‚‹
cd ..
```

### Step 2: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•

```bash
./scripts/start.sh
```

èµ·å‹•å®Œäº†ã¾ã§ç´„30ç§’ã‹ã‹ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™ï¼š

```
======================================
   ğŸš€ Whombat is now running!
======================================
Frontend:  http://localhost:3000
Backend:   http://localhost:5000
API Docs:  http://localhost:5000/docs
```

### Step 3: ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000 ã‚’é–‹ã

---

## ğŸ“Œ ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰

### Dockerç‰ˆ

```bash
# èµ·å‹•
./scripts/docker.sh start

# åœæ­¢
./scripts/docker.sh stop

# å†èµ·å‹•
./scripts/docker.sh restart

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
./scripts/docker.sh status

# ãƒ­ã‚°è¡¨ç¤º
./scripts/docker.sh logs
```

### é–‹ç™ºç‰ˆï¼ˆuv + npmï¼‰

```bash
# èµ·å‹•
./scripts/start.sh

# åœæ­¢
./scripts/stop.sh

# å†èµ·å‹•
./scripts/restart.sh

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
./scripts/status.sh
```

---

## ğŸ¯ å¯è¦–æ€§åˆ¶å¾¡æ©Ÿèƒ½ã®ä½¿ã„æ–¹

### 1. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ

1. http://localhost:3000 ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒSign Upã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ç™»éŒ²

### 2. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ä½œæˆ

1. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒDatasetsã€ã‚’é¸æŠ
2. ã€ŒCreate Datasetã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. å¿…è¦ãªæƒ…å ±ã‚’å…¥åŠ›ï¼š
   - **Name**: ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå
   - **Description**: èª¬æ˜
   - **Audio Directory**: éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹
   - **Visibility**: å¯è¦–æ€§ãƒ¬ãƒ™ãƒ«ã‚’é¸æŠ
     - ğŸŒ **Public**: å…¨èªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé–²è¦§å¯èƒ½
     - ğŸ‘¥ **Restricted**: é¸æŠã—ãŸã‚°ãƒ«ãƒ¼ãƒ—ãƒ¡ãƒ³ãƒãƒ¼ã®ã¿é–²è¦§å¯èƒ½
     - ğŸ”’ **Private**: ã‚ãªãŸã®ã¿é–²è¦§å¯èƒ½

4. Restrictedã‚’é¸æŠã—ãŸå ´åˆï¼š
   - Groupã‚»ãƒ¬ã‚¯ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - ã‚ãªãŸãŒManagerã§ã‚ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã®ã¿é¸æŠå¯èƒ½

### 3. ã‚°ãƒ«ãƒ¼ãƒ—ã®ä½œæˆï¼ˆRestrictedæ©Ÿèƒ½ã‚’ä½¿ã†å ´åˆï¼‰

1. Adminæ¨©é™ãŒå¿…è¦
2. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒAdminã€â†’ã€ŒGroupsã€ã‚’é¸æŠ
3. ã€ŒCreate Groupã€ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ã‚°ãƒ«ãƒ¼ãƒ—åã¨èª¬æ˜ã‚’å…¥åŠ›
5. ãƒ¡ãƒ³ãƒãƒ¼ã‚’è¿½åŠ ã—ã€ãƒ­ãƒ¼ãƒ«ã‚’è¨­å®šï¼š
   - **Manager**: ã‚°ãƒ«ãƒ¼ãƒ—ç®¡ç†æ¨©é™ã€Restrictedãƒªã‚½ãƒ¼ã‚¹ä½œæˆå¯èƒ½
   - **Member**: ã‚°ãƒ«ãƒ¼ãƒ—ãƒªã‚½ãƒ¼ã‚¹ã®é–²è¦§ã®ã¿

### 4. ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

1. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒAnnotation Projectsã€ã‚’é¸æŠ
2. ã€ŒCreate Projectã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¨åŒã˜Visibilityè¨­å®šãŒå¯èƒ½

---

## ğŸ” å¯è¦–æ€§ãƒ¬ãƒ™ãƒ«ã®è©³ç´°

| ãƒ¬ãƒ™ãƒ« | ã‚¢ã‚¤ã‚³ãƒ³ | èª°ãŒè¦‹ã‚Œã‚‹ï¼Ÿ | èª°ãŒç·¨é›†ã§ãã‚‹ï¼Ÿ | ä½¿ç”¨ä¾‹ |
|--------|---------|------------|---------------|--------|
| **Public** | ğŸŒ | å…¨èªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ | ä½œæˆè€…ã®ã¿ | å…¬é–‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ |
| **Restricted** | ğŸ‘¥ | ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¡ãƒ³ãƒãƒ¼ | ã‚°ãƒ«ãƒ¼ãƒ—Manager | ãƒãƒ¼ãƒ å…±æœ‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |
| **Private** | ğŸ”’ | ä½œæˆè€…ã®ã¿ | ä½œæˆè€…ã®ã¿ | å€‹äººç”¨ãƒ‡ãƒ¼ã‚¿ |

---

## ğŸ’¡ Tips

### ãƒ­ã‚°ã®ç¢ºèª

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ­ã‚°
tail -f logs/backend.log

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ­ã‚°
tail -f logs/frontend.log
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

**å•é¡Œ**: ãƒãƒ¼ãƒˆãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹

```bash
# å¼·åˆ¶åœæ­¢
./scripts/stop.sh
```

**å•é¡Œ**: èµ·å‹•ã«å¤±æ•—ã™ã‚‹

```bash
# ãƒ­ã‚°ã‚’ç¢ºèª
cat logs/backend.log
cat logs/frontend.log

# æ‰‹å‹•ã§èµ·å‹•ãƒ†ã‚¹ãƒˆ
cd back
WHOMBAT_DEV=true uv run python -m whombat

cd ../front
npm run dev
```

**å•é¡Œ**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰
cd back
rm -f whombat.db
uv run alembic upgrade head
```

---

## ğŸŒ ã‚¢ã‚¯ã‚»ã‚¹URLä¸€è¦§

| ã‚µãƒ¼ãƒ“ã‚¹ | URL | èª¬æ˜ |
|---------|-----|------|
| **ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª** | http://localhost:3000 | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ |
| **API Docs** | http://localhost:5000/docs | Swagger UI |
| **ReDoc** | http://localhost:5000/redoc | APIä»•æ§˜æ›¸ |
| **API** | http://localhost:5000/api/v1 | REST API |

---

## ğŸ“š è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: [scripts/README.md](scripts/README.md)
- **å¯è¦–æ€§åˆ¶å¾¡å®Ÿè£…**: [VISIBILITY_IMPLEMENTATION_COMPLETE.md](VISIBILITY_IMPLEMENTATION_COMPLETE.md)
- **å®Ÿè£…è¨ˆç”»**: [VISIBILITY_CONTROL_PLAN_v2.md](VISIBILITY_CONTROL_PLAN_v2.md)

---

## ğŸ“ ã•ã‚‰ã«å­¦ã¶

### APIä»•æ§˜ã®ç¢ºèª

1. http://localhost:5000/docs ã«ã‚¢ã‚¯ã‚»ã‚¹
2. å„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®èª¬æ˜ã‚’ç¢ºèª
3. ã€ŒTry it outã€ã§ç›´æ¥APIã‚’ãƒ†ã‚¹ãƒˆå¯èƒ½

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç¢ºèª

```bash
cd back
uv run python

>>> from whombat.models import Dataset, AnnotationProject
>>> # ãƒ¢ãƒ‡ãƒ«ã‚’èª¿æŸ»
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®Storybookã‚’ç¢ºèª

```bash
cd front
npm run storybook
# http://localhost:6006 ã§ã‚¢ã‚¯ã‚»ã‚¹
```

---

## ğŸ›Ÿ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆï¼š

1. **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª**: `./scripts/status.sh`
2. **ãƒ­ã‚°ç¢ºèª**: `logs/backend.log`, `logs/frontend.log`
3. **å†èµ·å‹•**: `./scripts/restart.sh`
4. **Issueå ±å‘Š**: https://github.com/mbsantiago/whombat/issues

---

**æœ€çµ‚æ›´æ–°**: 2025-10-18
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 0.8.6

Happy Annotating! ğŸµğŸ”Š
